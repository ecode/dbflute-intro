<!DOCTYPE html>
<html>
  <head>
    <meta charset='utf-8'>
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <link href='https://fonts.googleapis.com/css?family=Chivo:900' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" type="text/css" href="stylesheets/stylesheet.css" media="screen" />
    <link rel="stylesheet" type="text/css" href="stylesheets/pygment_trac.css" media="screen" />
    <link rel="stylesheet" type="text/css" href="stylesheets/print.css" media="print" />
    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <title>Dbflute-intro by ecode</title>
  </head>

  <body>
    <div id="container">
      <div class="inner">

        <header>
          <h1>Dbflute-intro</h1>
          <h2></h2>
        </header>

        <section id="downloads" class="clearfix">
          <a href="https://github.com/ecode/dbflute-intro/zipball/master" id="download-zip" class="button"><span>Download .zip</span></a>
          <a href="https://github.com/ecode/dbflute-intro/tarball/master" id="download-tar-gz" class="button"><span>Download .tar.gz</span></a>
          <a href="https://github.com/ecode/dbflute-intro" id="view-on-github" class="button"><span>View on GitHub</span></a>
        </section>

        <hr>

        <section id="main_content">
          <h1>
<a name="dbflute-intro" class="anchor" href="#dbflute-intro"><span class="octicon octicon-link"></span></a>DBFlute Intro</h1>

<h2>
<a name="dbflute-intro%E3%81%A8%E3%81%AF" class="anchor" href="#dbflute-intro%E3%81%A8%E3%81%AF"><span class="octicon octicon-link"></span></a>DBFlute Introとは</h2>

<p>DBFluteの導入(セットアップ)ツールです。</p>

<p><a href="http://dbflute.seasar.org/ja/manual/function/helper/intro/index.html">http://dbflute.seasar.org/ja/manual/function/helper/intro/index.html</a></p>

<p>DBFlute Introのコンセプト</p>

<p>java開発者以外にも使いやすいように。</p>

<p>→javaが実行できる環境は必要ですが、eclipseやmavenの知識は不要です。</p>

<p>DBFluteのO/Rマッパー以外の機能を手軽に利用できるように。
(O/Rマッパーとして使わなくても(使えなくても)便利な機能がたくさんあります。)</p>

<pre><code>SchemaHTML ○
HistoryHTML ○
SchemaSyncCheck ○
CraftDiff △
LoadDataReverse○
PropertiesHTML
ReplaceSchema
AlterCheck
FreeGen
</code></pre>

<p>※◯がついている機能がDBFlute Introで簡単に利用できます。</p>

<h2>
<a name="%E3%83%87%E3%83%A2" class="anchor" href="#%E3%83%87%E3%83%A2"><span class="octicon octicon-link"></span></a>デモ</h2>

<h3>
<a name="1--%E3%83%80%E3%82%A6%E3%83%B3%E3%83%AD%E3%83%BC%E3%83%89" class="anchor" href="#1--%E3%83%80%E3%82%A6%E3%83%B3%E3%83%AD%E3%83%BC%E3%83%89"><span class="octicon octicon-link"></span></a>1 . ダウンロード</h3>

<p>1-1. DBFlute Intro本体</p>

<p><a href="http://dbflute.seasar.org/download/helper/dbflute-intro/dbflute-intro.jar">http://dbflute.seasar.org/download/helper/dbflute-intro/dbflute-intro.jar</a></p>

<p>1-2. デモに使用するDB</p>

<p><a href="https://www.seasar.org/svn/dbflute/trunk/dbflute-basic-example/src/main/resources/exampledb/exampledb.h2.db">https://www.seasar.org/svn/dbflute/trunk/dbflute-basic-example/src/main/resources/exampledb/exampledb.h2.db</a></p>

<p>※参考 ER図 <a href="http://dbflute.seasar.org/ja/view/exampledb/index.html?goto=1">http://dbflute.seasar.org/ja/view/exampledb/index.html?goto=1</a></p>

<p>1-3. フォルダ配置
デモフォルダを作って、1-1、1-2のファイルを配置。</p>

<pre><code> dbflute-intro-demo
 ├dbflute-intro.jar
 └db
   ├exampledb.h2.db
   ├exampledb_st.h2.db ・・・ 1-2のファイルをコピー
   └exampledb_it.h2.db ・・・ 1-2のファイルをコピー
</code></pre>

<h3>
<a name="2--dbflute-intro%E3%81%AE%E3%82%BB%E3%83%83%E3%83%88%E3%82%A2%E3%83%83%E3%83%97" class="anchor" href="#2--dbflute-intro%E3%81%AE%E3%82%BB%E3%83%83%E3%83%88%E3%82%A2%E3%83%83%E3%83%97"><span class="octicon octicon-link"></span></a>2 . DBFlute Introのセットアップ</h3>

<p>2-1. DBFlute Introの実行</p>

<pre><code>java -jar dbflute-intro.jar
</code></pre>

<p>※macの場合はjarダブルクリックでもOK。</p>

<p>(新しいOSでセキュリティ警告が出るため、初回は右クリックから選択して実行。)</p>

<p>2-2. DBFluteクライアントのダウンロード</p>

<p>バージョンを入力して、「OK」を押下。</p>

<p>※デフォルトは最新バージョンになっています。</p>

<p>2.3. 初期設定(管理したいDBごとに1回)</p>

<pre><code>DB名 = exampledb (任意の名前)
RDMS = H2 (RDBの種類)
URL =  jdbc:h2:file:../db/exampledb (DB接続URL。RDBごとに記述が異なります。)
スキーマ = PUBLIC (スキーマ名。スキーマの概念がない場合は、空)
ユーザ = sa (DBの接続ユーザ名)
パスワード = 空 (パスワード)
Jdbcドライバのパス = 空 (H2の場合はDBFluteクライアントにバンドルされているため不要)
DBFluteバージョン = 1.0.4.B(ダンロードしているDBFluteクライアントの任意のバージョン)
</code></pre>

<p>他のDB環境の+を押下。</p>

<p>「it」と入力。</p>

<pre><code>URL = jdbc:h2:file:../db/exampledb_it (DB接続URL。RDBごとに記述が異なります。)
スキーマ = PUBLIC (スキーマ名。スキーマの概念がない場合は、空)
ユーザ = sa (DBの接続ユーザ名)
パスワード = 空 (パスワード)
</code></pre>

<p>他のDB環境の+を押下。</p>

<p>「st」と入力。</p>

<pre><code>URL = jdbc:h2:file:../db/exampledb_st (DB接続URL。RDBごとに記述が異なります。)
スキーマ = PUBLIC (スキーマ名。スキーマの概念がない場合は、空)
ユーザ = sa (DBの接続ユーザ名)
パスワード = 空 (パスワード)
</code></pre>

<p>「作成」を押下。</p>

<h3>
<a name="3--%E6%83%85%E5%A0%B1%E5%8F%96%E5%BE%97%E5%8F%82%E7%85%A7" class="anchor" href="#3--%E6%83%85%E5%A0%B1%E5%8F%96%E5%BE%97%E5%8F%82%E7%85%A7"><span class="octicon octicon-link"></span></a>3 . 情報取得、参照</h3>

<p>3-1. DB情報取得、参照。</p>

<p>「ドキュメント作成」を押下。</p>

<p>「テーブル定義を開く」を押下して、htmlを確認。</p>

<p>「DB変更履歴を開く」を押下して、htmlを確認。</p>

<p>※現時点では差分がないため、参照できません。</p>

<p>3-2. 別環境のDBとDDLレベルの差分確認。</p>

<p>「スキーマの差分チェック」を押下して、「it」を選択。</p>

<p>「差分チェック結果を開く」を押下して、 「it」を選択して、htmlを確認。</p>

<p>※現時点では差分がないため、参照できません。</p>

<h3>
<a name="4--db%E6%83%85%E5%A0%B1%E5%A4%89%E6%9B%B4%E5%BE%8C%E3%81%ABdb%E6%83%85%E5%A0%B1%E5%8F%96%E5%BE%97%E5%8F%82%E7%85%A7" class="anchor" href="#4--db%E6%83%85%E5%A0%B1%E5%A4%89%E6%9B%B4%E5%BE%8C%E3%81%ABdb%E6%83%85%E5%A0%B1%E5%8F%96%E5%BE%97%E5%8F%82%E7%85%A7"><span class="octicon octicon-link"></span></a>4 . DB情報変更後にDB情報取得、参照。</h3>

<p>4-1. DBに接続する。</p>

<p>exampledb.h2.dbに任意の方法で接続。</p>

<p>4-2. DDL発行。</p>

<pre><code>ALTER TABLE PUBLIC.MEMBER ADD TEST_COLUMN VARCHAR(10);
CREATE TABLE TEST_TABLE(TEST_ID INTEGER IDENTITY NOT NULL PRIMARY KEY);
</code></pre>

<p>4-3. DB情報取得、参照。</p>

<p>「ドキュメント作成」を押下。</p>

<p>「テーブル定義を開く」を押下して、htmlを確認。</p>

<p>「DB変更履歴を開く」を押下して、htmlを確認。</p>

<p>4-4. 別環境のDBとDDLレベルの差分確認。</p>

<p>「スキーマの差分チェック」を押下して、「it」を選択。</p>

<p>「差分チェック結果を開く」を押下して、 「it」を選択して、htmlを確認。</p>

<p>4-5. DDLを発行して、差分をなくす。</p>

<p>exampledb_it.h2.dbに任意の方法で接続して、4-2のDDLを発行。</p>

<p>4-6. 別環境のDBとDDLレベルの差分確認。</p>

<p>「スキーマの差分チェック」を押下して、「it」を選択。</p>

<p>「差分チェック結果を開く」を押下して、 「it」を選択して、htmlを確認。</p>

<p>※現時点では差分がないため、参照できません。</p>

<h3>
<a name="5--%E5%88%A5%E7%92%B0%E5%A2%83%E3%81%AEdb%E3%81%A8dml%E3%83%AC%E3%83%99%E3%83%AB%E3%81%AE%E5%B7%AE%E5%88%86%E7%A2%BA%E8%AA%8D" class="anchor" href="#5--%E5%88%A5%E7%92%B0%E5%A2%83%E3%81%AEdb%E3%81%A8dml%E3%83%AC%E3%83%99%E3%83%AB%E3%81%AE%E5%B7%AE%E5%88%86%E7%A2%BA%E8%AA%8D"><span class="octicon octicon-link"></span></a>5 . 別環境のDBとDMLレベルの差分確認。</h3>

<p>5-1. 前提知識</p>

<p><a href="http://dbflute.seasar.org/ja/manual/function/genbafit/projectfit/craftdiff/">http://dbflute.seasar.org/ja/manual/function/genbafit/projectfit/craftdiff/</a></p>

<p>5-2. DML差分のための準備</p>

<p>以下のフォルダに、「craftdiff」フォルダを作成。</p>

<p>dbflute-intro-demo/dbflute-intro/dbflute_exampledb/schema</p>

<p>「craftdiff」フォルダに「craft-schema.sql」を作成。</p>

<pre><code>-- #df:assertEquals(MemberStatus)#
select MEMBER_STATUS_CODE as KEY, MEMBER_STATUS_NAME, DISPLAY_ORDER
  from MEMBER_STATUS
 order by KEY
;
</code></pre>

<p>5-3. DB情報取得、参照。</p>

<p>「ドキュメント作成」を押下。</p>

<p>「DB変更履歴を開く」を押下して、htmlを確認。</p>

<p>5-4. 別環境のDBとDMLレベルの差分確認。</p>

<p>「スキーマの差分チェック」を押下して、「it」を選択。</p>

<p>「差分チェック結果を開く」を押下して、 「it」を選択して、htmlを確認。</p>

<p>end.</p>
        </section>

        <footer>
          Dbflute-intro is maintained by <a href="https://github.com/ecode">ecode</a><br>
          This page was generated by <a href="http://pages.github.com">GitHub Pages</a>. Tactile theme by <a href="https://twitter.com/jasonlong">Jason Long</a>.
        </footer>

        
      </div>
    </div>
  </body>
</html>